<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>debezium sqlserver配置</title>
    <link href="/2021/05/31/debezium-sqlserver%E9%85%8D%E7%BD%AE/"/>
    <url>/2021/05/31/debezium-sqlserver%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>Debezium SQL Server连接器具有许多配置属性，可用于为应用程序实现正确的连接器行为。许多属性都有默认值。</p><p>除非提供默认值，否则以下配置属性是必需的。</p><table><thead><tr><th><strong>Property</strong></th><th><strong>Default</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-name" target="_blank" rel="noopener"><code>name</code></a></td><td></td><td>Unique name for the connector. Attempting to register again with the same name will fail. (This property is required by all Kafka Connect connectors.)</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-connector-class" target="_blank" rel="noopener"><code>connector.class</code></a></td><td></td><td>The name of the Java class for the connector. Always use a value of <code>io.debezium.connector.sqlserver.SqlServerConnector</code> for the SQL Server connector.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-tasks-max" target="_blank" rel="noopener"><code>tasks.max</code></a></td><td><code>1</code></td><td>The maximum number of tasks that should be created for this connector. The SQL Server connector always uses a single task and therefore does not use this value, so the default is always acceptable.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-database-hostname" target="_blank" rel="noopener"><code>database.hostname</code></a></td><td></td><td>IP address or hostname of the SQL Server database server.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-database-port" target="_blank" rel="noopener"><code>database.port</code></a></td><td><code>1433</code></td><td>Integer port number of the SQL Server database server.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-database-user" target="_blank" rel="noopener"><code>database.user</code></a></td><td></td><td>Username to use when connecting to the SQL Server database server.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-database-password" target="_blank" rel="noopener"><code>database.password</code></a></td><td></td><td>Password to use when connecting to the SQL Server database server.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-database-dbname" target="_blank" rel="noopener"><code>database.dbname</code></a></td><td></td><td>The name of the SQL Server database from which to stream the changes</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-database-server-name" target="_blank" rel="noopener"><code>database.server.name</code></a></td><td></td><td>Logical name that identifies and provides a namespace for the SQL Server database server that you want Debezium to capture. The logical name should be unique across all other connectors, since it is used as a prefix for all Kafka topic names emanating from this connector. Only alphanumeric characters, hyphens and underscores must be used.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-database-history-kafka-topic" target="_blank" rel="noopener"><code>database.history.kafka.topic</code></a></td><td></td><td>The full name of the Kafka topic where the connector will store the database schema history.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-database-history-kafka-bootstrap-servers" target="_blank" rel="noopener"><code>database.history.kafka.bootstrap.servers</code></a></td><td></td><td>A list of host and port pairs that the connector will use for establishing an initial connection to the Kafka cluster. This connection is used for retrieving database schema history previously stored by the connector, and for writing each DDL statement read from the source database. This should point to the same Kafka cluster used by the Kafka Connect process.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-table-include-list" target="_blank" rel="noopener"><code>table.include.list</code></a></td><td></td><td>An optional comma-separated list of regular expressions that match fully-qualified table identifiers for tables that you want Debezium to capture; any table that is not included in <code>table.include.list</code> is excluded from capture. Each identifier is of the form <em>schemaName</em>.<em>tableName</em>. By default, the connector captures all non-system tables for the designated schemas. Must not be used with <code>table.exclude.list</code>.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-table-exclude-list" target="_blank" rel="noopener"><code>table.exclude.list</code></a></td><td></td><td>An optional comma-separated list of regular expressions that match fully-qualified table identifiers for the tables that you want to exclude from being captured; Debezium captures all tables that are not included in <code>table.exclude.list</code>. Each identifier is of the form <em>schemaName</em>.<em>tableName</em>. Must not be used with <code>table.include.list</code>.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-column-include-list" target="_blank" rel="noopener"><code>column.include.list</code></a></td><td><em>empty string</em></td><td>An optional comma-separated list of regular expressions that match the fully-qualified names of columns that should be included in the change event message values. Fully-qualified names for columns are of the form <em>schemaName</em>.<em>tableName</em>.<em>columnName</em>. Note that primary key columns are always included in the event’s key, even if not included in the value. Do not also set the <code>column.exclude.list</code> property.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-column-exclude-list" target="_blank" rel="noopener"><code>column.exclude.list</code></a></td><td><em>empty string</em></td><td>An optional comma-separated list of regular expressions that match the fully-qualified names of columns that should be excluded from change event message values. Fully-qualified names for columns are of the form <em>schemaName</em>.<em>tableName</em>.<em>columnName</em>. Note that primary key columns are always included in the event’s key, also if excluded from the value. Do not also set the <code>column.include.list</code> property.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-column-mask-hash" target="_blank" rel="noopener"><code>column.mask.hash._hashAlgorithm_.with.salt._salt_</code></a></td><td><em>n/a</em></td><td>An optional comma-separated list of regular expressions that match the fully-qualified names of character-based columns whose values should be pseudonyms in the change event message values with a field value consisting of the hashed value using the algorithm <code>*hashAlgorithm*</code> and salt <code>*salt*</code>. Based on the used hash function referential integrity is kept while data is pseudonymized. Supported hash functions are described in the <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#MessageDigest" target="_blank" rel="noopener">MessageDigest section</a> of the Java Cryptography Architecture Standard Algorithm Name Documentation. The hash is automatically shortened to the length of the column.Multiple properties with different lengths can be used in a single configuration, although in each the length must be a positive integer or zero. Fully-qualified names for columns are of the form <em>schemaName</em>.<em>tableName</em>.<em>columnName</em>.Example:<code>column.mask.hash.SHA-256.with.salt.CzQMA0cB5K = dbo.orders.customerName, dbo.shipment.customerName</code>where <code>CzQMA0cB5K</code> is a randomly selected salt.Note: Depending on the <code>*hashAlgorithm*</code> used, the <code>*salt*</code> selected and the actual data set, the resulting masked data set may not be completely anonymized.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-time-precision-mode" target="_blank" rel="noopener"><code>time.precision.mode</code></a></td><td><code>adaptive</code></td><td>Time, date, and timestamps can be represented with different kinds of precision, including: <code>adaptive</code> (the default) captures the time and timestamp values exactly as in the database using either millisecond, microsecond, or nanosecond precision values based on the database column’s type; or <code>connect</code> always represents time and timestamp values using Kafka Connect’s built-in representations for Time, Date, and Timestamp, which uses millisecond precision regardless of the database columns’ precision. See <a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-temporal-values" target="_blank" rel="noopener">temporal values</a>.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-decimal-handling-mode" target="_blank" rel="noopener"><code>decimal.handling.mode</code></a></td><td><code>precise</code></td><td>Specifies how the connector should handle values for <code>DECIMAL</code> and <code>NUMERIC</code> columns:  <code>precise</code> (the default) represents them precisely using <code>java.math.BigDecimal</code> values represented in change events in a binary form.  <code>double</code> represents them using <code>double</code> values, which may result in a loss of precision but is easier to use.  <code>string</code> encodes values as formatted strings, which is easy to consume but semantic information about the real type is lost.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-include-schema-changes" target="_blank" rel="noopener"><code>include.schema.changes</code></a></td><td><code>true</code></td><td>Boolean value that specifies whether the connector should publish changes in the database schema to a Kafka topic with the same name as the database server ID. Each schema change is recorded with a key that contains the database name and a value that is a JSON structure that describes the schema update. This is independent of how the connector internally records database history. The default is <code>true</code>.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-tombstones-on-delete" target="_blank" rel="noopener"><code>tombstones.on.delete</code></a></td><td><code>true</code></td><td>Controls whether a <em>delete</em> event is followed by a tombstone event.  <code>true</code> - a delete operation is represented by a <em>delete</em> event and a subsequent tombstone event.  <code>false</code> - only a <em>delete</em> event is emitted.  After a source record is deleted, emitting a tombstone event (the default behavior) allows Kafka to completely delete all events that pertain to the key of the deleted row in case <a href="https://kafka.apache.org/documentation/#compaction" target="_blank" rel="noopener">log compaction</a> is enabled for the topic.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-column-truncate-to-length-chars" target="_blank" rel="noopener"><code>column.truncate.to._length_.chars</code></a></td><td><em>n/a</em></td><td>An optional comma-separated list of regular expressions that match the fully-qualified names of character-based columns whose values should be truncated in the change event message values if the field values are longer than the specified number of characters. Multiple properties with different lengths can be used in a single configuration, although in each the length must be a positive integer. Fully-qualified names for columns are of the form <em>schemaName</em>.<em>tableName</em>.<em>columnName</em>.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-column-mask-with-length-chars" target="_blank" rel="noopener"><code>column.mask.with._length_.chars</code></a></td><td><em>n/a</em></td><td>An optional comma-separated list of regular expressions that match the fully-qualified names of character-based columns whose values should be replaced in the change event message values with a field value consisting of the specified number of asterisk (<code>*</code>) characters. Multiple properties with different lengths can be used in a single configuration, although in each the length must be a positive integer or zero. Fully-qualified names for columns are of the form <em>schemaName</em>.<em>tableName</em>.<em>columnName</em>.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-column-propagate-source-type" target="_blank" rel="noopener"><code>column.propagate.source.type</code></a></td><td><em>n/a</em></td><td>An optional comma-separated list of regular expressions that match the fully-qualified names of columns whose original type and length should be added as a parameter to the corresponding field schemas in the emitted change messages. The schema parameters <code>__debezium.source.column.type</code>, <code>__debezium.source.column.length</code> and <code>__debezium.source.column.scale</code> is used to propagate the original type name and length (for variable-width types), respectively. Useful to properly size corresponding columns in sink databases. Fully-qualified names for columns are of the form <em>schemaName</em>.<em>tableName</em>.<em>columnName</em>.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-datatype-propagate-source-type" target="_blank" rel="noopener"><code>datatype.propagate.source.type+</code></a></td><td><em>n/a</em></td><td>An optional comma-separated list of regular expressions that match the database-specific data type name of columns whose original type and length should be added as a parameter to the corresponding field schemas in the emitted change messages. The schema parameters <code>__debezium.source.column.type</code>, <code>__debezium.source.column.length</code> and <code>__debezium.source.column.scale</code> will be used to propagate the original type name and length (for variable-width types), respectively. Useful to properly size corresponding columns in sink databases. Fully-qualified data type names are of the form <em>schemaName</em>.<em>tableName</em>.<em>typeName</em>. See <a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-data-types" target="_blank" rel="noopener">SQL Server data types</a> for the list of SQL Server-specific data type names.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-message-key-columns" target="_blank" rel="noopener"><code>message.key.columns</code></a></td><td><em>n/a</em></td><td>A semi-colon list of regular expressions that match fully-qualified tables and columns to map a primary key. Each item (regular expression) must match the fully-qualified <code>&lt;fully-qualified table&gt;:&lt;a comma-separated list of columns&gt;</code> representing the custom key. Fully-qualified tables could be defined as <em>schemaName</em>.<em>tableName</em>.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-binary-handling-mode" target="_blank" rel="noopener"><code>binary.handling.mode</code></a></td><td>bytes</td><td>Specifies how binary (<code>binary</code>, <code>varbinary</code>) columns should be represented in change events, including: <code>bytes</code> represents binary data as byte array (default), <code>base64</code> represents binary data as base64-encoded String, <code>hex</code> represents binary data as hex-encoded (base16) String</td></tr><tr><td>database.include.list</td><td></td><td>仅监控哪个库的更改，默认监控所有数据库，可配置为正则表达式</td></tr><tr><td>database.exclude.list</td><td></td><td>不监控哪个库的更改，不能和database.include.list同时使用</td></tr></tbody></table><p>以下高级配置属性具有良好的默认设置，可以在大多数情况下使用，因此很少需要在连接器的配置中指定。</p><table><thead><tr><th><strong>Property</strong></th><th><strong>Default</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-snapshot-mode" target="_blank" rel="noopener"><code>snapshot.mode</code></a></td><td><em>initial</em></td><td>A mode for taking an initial snapshot of the structure and optionally data of captured tables. Once the snapshot is complete, the connector will continue reading change events from the database’s redo logs. The following values are supported:<code>initial</code>: Takes a snapshot of structure and data of captured tables; useful if topics should be populated with a complete representation of the data from the captured tables. <code>initial_only</code>: Takes a snapshot of structure and data like <code>initial</code> but instead does not transition into streaming changes once the snapshot has completed. <code>schema_only</code>: Takes a snapshot of the structure of captured tables only; useful if only changes happening from now onwards should be propagated to topics.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-snapshot-include-collection-list" target="_blank" rel="noopener"><code>snapshot.include.collection.list</code></a></td><td>All tables specified in <code>table.include.list</code></td><td>An optional, comma-separated list of regular expressions that match names of <strong>fully-qualified</strong> table names (<code>&lt;db-name&gt;.&lt;schema-name&gt;.&lt;name&gt;</code>) included in <code>table.include.list</code> for which you <strong>want</strong> to take the snapshot.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-snapshot-isolation-mode" target="_blank" rel="noopener"><code>snapshot.isolation.mode</code></a></td><td><em>repeatable_read</em></td><td>Mode to control which transaction isolation level is used and how long the connector locks tables that are designated for capture. The following values are supported:<code>read_uncommitted``read_committed``repeatable_read``snapshot``exclusive</code> (<code>exclusive</code> mode uses repeatable read isolation level, however, it takes the exclusive lock on all tables to be read). The <code>snapshot</code>, <code>read_committed</code> and <code>read_uncommitted</code> modes do not prevent other transactions from updating table rows during initial snapshot. The <code>exclusive</code> and <code>repeatable_read</code> modes do prevent concurrent updates. Mode choice also affects data consistency. Only <code>exclusive</code> and <code>snapshot</code> modes guarantee full consistency, that is, initial snapshot and streaming logs constitute a linear history. In case of <code>repeatable_read</code> and <code>read_committed</code> modes, it might happen that, for instance, a record added appears twice - once in initial snapshot and once in streaming phase. Nonetheless, that consistency level should do for data mirroring. For <code>read_uncommitted</code> there are no data consistency guarantees at all (some data might be lost or corrupted).</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-event-processing-failure-handling-mode" target="_blank" rel="noopener"><code>event.processing.failure.handling.mode</code></a></td><td><code>fail</code></td><td>Specifies how the connector should react to exceptions during processing of events. <code>fail</code> will propagate the exception (indicating the offset of the problematic event), causing the connector to stop. <code>warn</code> will cause the problematic event to be skipped and the offset of the problematic event to be logged. <code>skip</code> will cause the problematic event to be skipped.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-poll-interval-ms" target="_blank" rel="noopener"><code>poll.interval.ms</code></a></td><td><code>1000</code></td><td>Positive integer value that specifies the number of milliseconds the connector should wait during each iteration for new change events to appear. Defaults to 1000 milliseconds, or 1 second.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-max-queue-size" target="_blank" rel="noopener"><code>max.queue.size</code></a></td><td><code>8192</code></td><td>Positive integer value that specifies the maximum size of the blocking queue into which change events read from the database log are placed before they are written to Kafka. This queue can provide backpressure to the CDC table reader when, for example, writes to Kafka are slower or if Kafka is not available. Events that appear in the queue are not included in the offsets periodically recorded by this connector. Defaults to 8192, and should always be larger than the maximum batch size specified in the <code>max.batch.size</code> property.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-max-batch-size" target="_blank" rel="noopener"><code>max.batch.size</code></a></td><td><code>2048</code></td><td>Positive integer value that specifies the maximum size of each batch of events that should be processed during each iteration of this connector. Defaults to 2048.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-heartbeat-interval-ms" target="_blank" rel="noopener"><code>heartbeat.interval.ms</code></a></td><td><code>0</code></td><td>Controls how frequently heartbeat messages are sent. This property contains an interval in milliseconds that defines how frequently the connector sends messages to a heartbeat topic. The property can be used to confirm whether the connector is still receiving change events from the database. You also should leverage heartbeat messages in cases where only records in non-captured tables are changed for a longer period of time. In such situation the connector would proceed to read the log from the database but never emit any change messages into Kafka, which in turn means that no offset updates are committed to Kafka. This may result in more change events to be re-sent after a connector restart. Set this parameter to <code>0</code> to not send heartbeat messages at all. Disabled by default.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-heartbeat-topics-prefix" target="_blank" rel="noopener"><code>heartbeat.topics.prefix</code></a></td><td><code>__debezium-heartbeat</code></td><td>Controls the naming of the topic to which heartbeat messages are sent. The topic is named according to the pattern <code>&lt;heartbeat.topics.prefix&gt;.&lt;server.name&gt;</code>.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-snapshot-delay-ms" target="_blank" rel="noopener"><code>snapshot.delay.ms</code></a></td><td></td><td>An interval in milli-seconds that the connector should wait before taking a snapshot after starting up; Can be used to avoid snapshot interruptions when starting multiple connectors in a cluster, which may cause re-balancing of connectors.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-snapshot-fetch-size" target="_blank" rel="noopener"><code>snapshot.fetch.size</code></a></td><td><code>2000</code></td><td>Specifies the maximum number of rows that should be read in one go from each table while taking a snapshot. The connector will read the table contents in multiple batches of this size. Defaults to 2000.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-query-fetch-size" target="_blank" rel="noopener"><code>query.fetch.size</code></a></td><td></td><td>Specifies the number of rows that will be fetched for each database round-trip of a given query. Defaults to the JDBC driver’s default fetch size.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-snapshot-lock-timeout-ms" target="_blank" rel="noopener"><code>snapshot.lock.timeout.ms</code></a></td><td><code>10000</code></td><td>An integer value that specifies the maximum amount of time (in milliseconds) to wait to obtain table locks when performing a snapshot. If table locks cannot be acquired in this time interval, the snapshot will fail (also see <a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-snapshots" target="_blank" rel="noopener">snapshots</a>). When set to <code>0</code> the connector will fail immediately when it cannot obtain the lock. Value <code>-1</code> indicates infinite waiting.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-snapshot-select-statement-overrides" target="_blank" rel="noopener"><code>snapshot.select.statement.overrides</code></a></td><td></td><td>Controls which rows from tables are included in snapshot. This property contains a comma-separated list of fully-qualified tables <em>(SCHEMA_NAME.TABLE_NAME)</em>. Select statements for the individual tables are specified in further configuration properties, one for each table, identified by the id <code>snapshot.select.statement.overrides.[SCHEMA_NAME].[TABLE_NAME]</code>. The value of those properties is the SELECT statement to use when retrieving data from the specific table during snapshotting. <em>A possible use case for large append-only tables is setting a specific point where to start (resume) snapshotting, in case a previous snapshotting was interrupted.</em> <strong>Note</strong>: This setting has impact on snapshots only. Events captured during log reading are not affected by it.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-source-struct-version" target="_blank" rel="noopener"><code>source.struct.version</code></a></td><td>v2</td><td>Schema version for the <code>source</code> block in CDC events; Debezium 0.10 introduced a few breaking changes to the structure of the <code>source</code> block in order to unify the exposed structure across all the connectors. By setting this option to <code>v1</code> the structure used in earlier versions can be produced. Note that this setting is not recommended and is planned for removal in a future Debezium version.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-sanitize-field-names" target="_blank" rel="noopener"><code>sanitize.field.names</code></a></td><td><code>true</code> when connector configuration explicitly specifies the <code>key.converter</code> or <code>value.converter</code> parameters to use Avro, otherwise defaults to <code>false</code>.</td><td>Whether field names are sanitized to adhere to Avro naming requirements. See <a href="https://debezium.io/documentation/reference/configuration/avro.html#avro-naming" target="_blank" rel="noopener">Avro naming</a> for more details.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-database-server-timezone" target="_blank" rel="noopener"><code>database.server.timezone</code></a></td><td></td><td>Timezone of the server.This property defines the timezone of the transaction timestamp (<code>ts_ms</code>) that is retrieved from the server (which is actually not zoned). By default, the value is unset. Set a value for the property only when running on SQL Server 2014 or older, and the database server and the JVM running the Debezium connector use different timezones.When unset, default behavior is to use the timezone of the VM running the Debezium connector. In this case, when running on on SQL Server 2014 or older and using different timezones on server and the connector, incorrect ts_ms values may be produced. Possible values include “Z”, “UTC”, offset values like “+02:00”, short zone ids like “CET”, and long zone ids like “Europe/Paris”.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-provide-transaction-metadata" target="_blank" rel="noopener"><code>provide.transaction.metadata</code></a></td><td><code>false</code></td><td>When set to <code>true</code> Debezium generates events with transaction boundaries and enriches data events envelope with transaction metadata.See <a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-transaction-metadata" target="_blank" rel="noopener">Transaction Metadata</a> for additional details.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-retriable-restart-connector-wait-ms" target="_blank" rel="noopener"><code>retriable.restart.connector.wait.ms</code></a></td><td>10000 (10 seconds)</td><td>The number of milli-seconds to wait before restarting a connector after a retriable error occurs.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-skipped-operations" target="_blank" rel="noopener"><code>skipped.operations</code></a></td><td></td><td>comma-separated list of operation types that will be skipped during streaming. The operations include: <code>c</code> for inserts/create, <code>u</code> for updates, and <code>d</code> for deletes. By default, no operations are skipped.</td></tr><tr><td><a href="https://debezium.io/documentation/reference/connectors/sqlserver.html#sqlserver-property-signal-data-collection" target="_blank" rel="noopener"><code>signal.data.collection</code></a></td><td></td><td>Fully-qualified name of the data collection that is used to send <a href="https://debezium.io/documentation/reference/configuration/signalling.html" target="_blank" rel="noopener">signals</a> to the connector. The name format is <em>database_name.schema-name.table-name</em>.</td></tr></tbody></table><p>Debezium 1.3.0 以后把关于 “白名单” 与 “黑名单”的一些术语进行了修改</p><table><thead><tr><th>旧名称</th><th>新名称</th></tr></thead><tbody><tr><td><code>database.whitelist</code></td><td><code>database.include.list</code></td></tr><tr><td><code>database.blacklist</code></td><td><code>database.exclude.list</code></td></tr><tr><td><code>schema.whitelist</code></td><td><code>schema.include.list</code></td></tr><tr><td><code>schema.blacklist</code></td><td><code>schema.exclude.list</code></td></tr><tr><td><code>table.whitelist</code></td><td><code>table.include.list</code></td></tr><tr><td><code>table.blacklist</code></td><td><code>table.exclude.list</code></td></tr><tr><td><code>column.whitelist</code></td><td><code>column.include.list</code></td></tr><tr><td><code>column.blacklist</code></td><td><code>column.exclude.list</code></td></tr><tr><td></td><td></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>sqlserver</category>
      
      <category>cdc</category>
      
    </categories>
    
    
    <tags>
      
      <tag>sqlserver</tag>
      
      <tag>debezium</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dokcer安装并开启SQL Server代理</title>
    <link href="/2021/05/31/docker%E5%AE%89%E8%A3%85sqlserver%E5%B9%B6%E5%90%AF%E5%8A%A8%E4%BB%A3%E7%90%86/"/>
    <url>/2021/05/31/docker%E5%AE%89%E8%A3%85sqlserver%E5%B9%B6%E5%90%AF%E5%8A%A8%E4%BB%A3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="dokcer安装并开启SQL-Server代理"><a href="#dokcer安装并开启SQL-Server代理" class="headerlink" title="dokcer安装并开启SQL Server代理"></a>dokcer安装并开启SQL Server代理</h1><h3 id="docker-安装命令"><a href="#docker-安装命令" class="headerlink" title="docker 安装命令"></a>docker 安装命令</h3><pre><code class="hljs shell">docker run -e 'ACCEPT_EULA=Y' -e 'SA_PASSWORD=!_6t8iu%Io' -e 'MSSQL_AGENT_ENABLED=true' -p 1433:1433 -d --name sql1 -h sql1 mcr.microsoft.com/mssql/server:2017-CU24-ubuntu-16.04</code></pre><p><strong>说明</strong></p><table><thead><tr><th align="left">参数</th><th>说明</th></tr></thead><tbody><tr><td align="left"><strong>-e “ACCEPT_EULA=Y”</strong></td><td>将 ACCEPT_EULA 变量设置为任意值，以确认接受最终用户许可协议。 SQL Server 映像的必需设置。</td></tr><tr><td align="left">-e ‘SA_PASSWORD=&lt;YourStrong@Passw0rd&gt;’</td><td>指定至少包含 8 个字符且符合 <a href="https://docs.microsoft.com/zh-cn/sql/relational-databases/security/password-policy?view=sql-server-ver15" target="_blank" rel="noopener">SQL Server 密码要求</a>的强密码。 SQL Server 映像的必需设置。</td></tr><tr><td align="left">-e ‘MSSQL_AGENT_ENABLED=true’</td><td>开启 sql server 代理</td></tr><tr><td align="left"><strong>-p 1433:1433</strong></td><td>将主机环境中的 TCP 端口（第一个值）映射到容器中的 TCP 端口（第二个值）。 在此示例中，SQL Server 侦听容器中的 TCP 1433，并对主机上的端口 1433 公开。</td></tr><tr><td align="left"><strong>–name sql1</strong></td><td>为容器指定一个自定义名称，而不是使用随机生成的名称。 如果运行多个容器，则无法重复使用相同的名称。</td></tr><tr><td align="left">-h sql1</td><td>用于显式设置容器主机名，如果不指定它，则默认为容器 ID，该 ID 是随机生成的系统 GUID。</td></tr><tr><td align="left"><strong>mcr.microsoft.com/mssql/2017-CU24-ubuntu-16.04</strong></td><td>SQL Server 2017 Ubuntu Linux 容器映像。</td></tr></tbody></table><p>参考：<a href="https://docs.microsoft.com/zh-cn/sql/linux/quickstart-install-connect-docker?view=sql-server-ver15&amp;pivots=cs1-bash" target="_blank" rel="noopener">快速入门：使用 Docker 运行 SQL Server 容器映像</a></p><h3 id="开启SQL-Server代理"><a href="#开启SQL-Server代理" class="headerlink" title="开启SQL Server代理"></a>开启SQL Server代理</h3><p>想要让 sql server 自动备份数据库和启用数据变更捕捉(CDC)就必须要启动 sql server 代理服务</p><h4 id="windows启动SQL-Server-Agent服务"><a href="#windows启动SQL-Server-Agent服务" class="headerlink" title="windows启动SQL Server Agent服务"></a>windows启动SQL Server Agent服务</h4><p>在cmd命令提示符下，输入下列命令</p><pre><code class="hljs bash">net start SQLSERVERAGENT</code></pre><p>或</p><ol><li>在 <strong>“对象资源管理器”</strong> 中，单击加号以展开要管理 SQL Server 代理服务的服务器。</li><li>右键单击“SQL Server 代理”，然后选择“启动”、“停止”或“重启”。</li><li>在“用户帐户控制”对话框中，单击“是”。</li><li>系统提示是否要执行该操作时，请单击 <strong>“是”</strong></li></ol><p><img src="https://cdn.jsdelivr.net/gh/peacePiz/image-hosting@master/20210419/image.2zcfku5fp9q0.png" srcset="/img/loading.gif" alt="image"></p><p>设置开机启动</p><p><img src="https://cdn.jsdelivr.net/gh/peacePiz/image-hosting@master/20210419/image.2oc7otcpsuw0.png" srcset="/img/loading.gif" alt="image"></p><p>将“启动类型”设置为 自动，那么在电脑重启或开机时， SQL Server代理（MSSQLSERVER）就会自动启动了。</p><p>如果“启动类型”为手动，那么在电脑重启时，这个服务就不会自动启动了，就需要手动启动了</p><p>参考：[sqlserver SQL Agent服务无法启动](<a href="https://blog.csdn.net/Hehuyi_In/article/details/103228691" target="_blank" rel="noopener">sqlserver SQL Agent服务无法启动如何破_Hehuyi_In的博客-CSDN博客</a>)</p><p>参考：<a href="https://docs.microsoft.com/zh-cn/sql/ssms/agent/start-stop-or-pause-the-sql-server-agent-service?view=sql-server-ver15" target="_blank" rel="noopener">启动、停止或暂停服务 - SQL Server Agent | Microsoft Docs</a></p><h4 id="linux-下开启SQL-Server代理"><a href="#linux-下开启SQL-Server代理" class="headerlink" title="linux 下开启SQL Server代理"></a>linux 下开启SQL Server代理</h4><p>对于SQL Server 2019和SQL Server 2017 CU4及更高版本，您只需要启用SQL Server代理即可。您不需要安装单独的软件包。</p><p>要启用SQL Server代理，请按照以下步骤操作。</p><pre><code class="hljs shell">sudo /opt/mssql/bin/mssql-conf set sqlagent.enabled true  sudo systemctl restart mssql-server</code></pre><p>对于SQL Server 2017 CU3和更早版本，必须安装SQL Server代理程序包。</p><h4 id="Install-on-RHEL"><a href="#Install-on-RHEL" class="headerlink" title="Install on RHEL"></a>Install on RHEL</h4><p>使用以下步骤在Red Hat Enterprise Linux上安装mssql-server-agent。</p><pre><code class="hljs bash">sudo yum install mssql-server-agentsudo systemctl restart mssql-server</code></pre><p>如果已经安装了mssql-server-agent，则可以使用以下命令将其更新到最新版本：</p><pre><code class="hljs bash">sudo yum check-updatesudo yum update mssql-server-agentsudo systemctl restart mssql-server</code></pre><h4 id="Install-on-Ubuntu"><a href="#Install-on-Ubuntu" class="headerlink" title="Install on Ubuntu"></a>Install on Ubuntu</h4><p>使用以下步骤在Ubuntu上安装mssql-server-agent。</p><pre><code class="hljs bash">sudo apt-get update sudo apt-get install mssql-server-agentsudo systemctl restart mssql-server</code></pre><h4 id="Install-on-SLES"><a href="#Install-on-SLES" class="headerlink" title="Install on SLES"></a>Install on SLES</h4><p>使用以下步骤在SUSE Linux Enterprise Server上安装mssql-server-agent。</p><pre><code class="hljs bash">sudo zypper install mssql-server-agentsudo systemctl restart mssql-server</code></pre><p>如果已经安装了mssql-server-agent，则可以使用以下命令将其更新到最新版本：</p><pre><code class="hljs bash">sudo zypper refreshsudo zypper update mssql-server-agentsudo systemctl restart mssql-server</code></pre>]]></content>
    
    
    <categories>
      
      <category>sqlserver</category>
      
      <category>cdc</category>
      
    </categories>
    
    
    <tags>
      
      <tag>sqlserver</tag>
      
      <tag>agent</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sqlserver启用CDC</title>
    <link href="/2021/05/31/sqlserver%E5%90%AF%E7%94%A8CDC/"/>
    <url>/2021/05/31/sqlserver%E5%90%AF%E7%94%A8CDC/</url>
    
    <content type="html"><![CDATA[<h1 id="sqlserver-启用-cdc"><a href="#sqlserver-启用-cdc" class="headerlink" title="sqlserver 启用 cdc"></a>sqlserver 启用 cdc</h1><p><strong>要启动cdc必须先开启SQL Server代理</strong></p><p><strong>启动数据库捕获</strong></p><pre><code class="hljs sql"><span class="hljs-comment">-- 开启cdc</span><span class="hljs-keyword">USE</span> [databaseName]<span class="hljs-keyword">EXECUTE</span> sys.sp_cdc_enable_db<span class="hljs-keyword">GO</span><span class="hljs-comment">-- 如果开启数据库捕获报错误:15517，使用下面的方法处理</span><span class="hljs-keyword">ALTER</span> AUTHORIZATION <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DATABASE</span>::[databaseName] <span class="hljs-keyword">TO</span> [sa]<span class="hljs-comment">-- 查看是否设置成功，1代表开启cdc</span><span class="hljs-keyword">SELECT</span> is_cdc_enabled  <span class="hljs-keyword">FROM</span> SYS.databases <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span>=<span class="hljs-string">'databaseName'</span></code></pre><p><strong>设置跟踪表</strong></p><p>为当前数据库中指定的源表启用变更数据捕获。对表启用变更数据捕获时，应用于此表的每个数据操纵语言 (DML) 操作的记录都将写入事务日志中。变更数据捕获进程将从日志中检索此信息，并将其写入可通过使用一组函数访问的更改表中。</p><p><strong>格式：</strong></p><pre><code class="hljs sql"><span class="hljs-keyword">USE</span> databaseName;GOEXEC sys.sp_cdc_enable_table@source_schema ='dbo', <span class="hljs-comment">--表所属的架构名</span>@source_name='t_student',<span class="hljs-comment">--  被监控的数据表 </span>@role_name=null, <span class="hljs-comment">-- 是用于控制更改数据访问的数据库角色的名称。</span>@capture_instance=NULL, <span class="hljs-comment">-- 是用于命名变更数据捕获对象的捕获实例的名称，这个名称在后面的存储过程和函数中需要经常用到。</span>@supports_net_changes=1, <span class="hljs-comment">-- 指示是否对此捕获实例启用净更改查询支持如果此表有主键，或者有已使用 @index_name 参数进行标识的唯一索引，则此参数的默认值为 1。否则，此参数默认为 0。</span>@index_name=null, <span class="hljs-comment">-- 用于唯一标识源表中的行的唯一索引的名称。index_name 为 sysname，并且可以为 NULL。如果指定，则 index_name 必须是源表的唯一有效索引。如果指定 index_name，则标识的索引列优先于任何定义的主键列，就像表的唯一行标识符一样。</span>@captured_column_list=null, <span class="hljs-comment">-- 被监控的列，NULL时监控所有列</span>@filegroup_name=default, <span class="hljs-comment">-- 是要用于为捕获实例创建的更改表的文件组。</span>@allow_partition_switch=1; <span class="hljs-comment">-- 指示是否可以对启用了变更数据捕获的表执行 ALTER TABLE 的 SWITCH PARTITION 命令。allow_partition_switch 为 bit，默认值为 1。</span><span class="hljs-comment">-- 查询表是否启动跟踪,值为1标示已启动</span><span class="hljs-keyword">SELECT</span> is_tracked_by_cdc  <span class="hljs-keyword">FROM</span> SYS.tables <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span>=<span class="hljs-string">'t_student'</span></code></pre><p><strong>禁用表</strong></p><pre><code class="hljs sql"><span class="hljs-keyword">USE</span> hellodb;GOEXEC sys.sp_cdc_disable_table      @source_schema = 'dbo',      @source_name = 't_student',      @capture_instance = 'all';</code></pre>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2020/05/26/hello-world/"/>
    <url>/2020/05/26/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="hljs bash">$ hexo new <span class="hljs-string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="hljs bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="hljs bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="hljs bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
